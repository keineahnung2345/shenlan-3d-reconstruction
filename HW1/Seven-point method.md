# 七点法

参考[Seven-point algorithm](https://www.cs.unc.edu/~marc/tutorial/node55.html)。

$F$自由度为7（scale固定，singularity），因此理论上可以用七对点求解基础矩阵$F$。

仿照八点法构造如下方程：

$$A = \begin{bmatrix}
x_{11}x_{12} & x_{12}y_{11} & x_{12} &x_{11}y_{12} & y_{11}y_{12} & y_{12} & x_{11} & y_{11} & 1 \\x_{21}x_{22} & x_{22}y_{21} & x_{22} &x_{21}y_{22} & y_{21}y_{22} & y_{22} & x_{21} & y_{21} & 1 \\x_{31}x_{32} & x_{32}y_{31} & x_{32} &x_{31}y_{32} & y_{31}y_{32} & y_{32} & x_{31} & y_{31} & 1 \\x_{41}x_{42} & x_{42}y_{41} & x_{42} &x_{41}y_{42} & y_{41}y_{42} & y_{42} & x_{41} & y_{41} & 1 \\x_{51}x_{52} & x_{52}y_{51} & x_{52} &x_{51}y_{52} & y_{51}y_{52} & y_{52} & x_{51} & y_{51} & 1 \\x_{61}x_{62} & x_{62}y_{61} & x_{62} &x_{61}y_{62} & y_{61}y_{62} & y_{62} & x_{61} & y_{61} & 1  \\x_{71}x_{72} & x_{72}y_{71} & x_{72} &x_{71}y_{72} & y_{71}y_{72} & y_{72} & x_{71} & y_{71} & 1 \end{bmatrix}, Af = 0$$。

对矩阵$A$做SVD分解：$A = USV^T$。

$V$矩阵的最后两个column是$A$矩阵右零空间的basis，即$A$矩阵乘以$V_{*,8}$（$V$的倒数第二个column）与$V_{*,9}$（$V$的最后一个column）的线性组合会得到0，数学表达式为$A(V_{*,8}+\lambda V_{*,9}) = 0$。

证明如下：

$A(V_{*,8}+\lambda V_{*,9}) = USV^T(V_{*,8}+\lambda V_{*,9})$

因为$V$是正交矩阵（旋转矩阵乘上自身的转置矩阵可以得到I，所以旋转矩阵为正交矩阵），所以$V_i \cdot V_j = 0$ if $i \neq j$，$V_i \cdot V_j = 1$ if $i = j$。

因此$V^TV_{*,8} = (0,0,0,0,0,0,0,1,0)^T$，$V^TV_{*,9} = (0,0,0,0,0,0,0,0,1)^T$。

又因为$S$对角矩阵的最后两个column全为0，所以$SV^TV_{*,8} = S_{8,*} \cdot (0,0,0,0,0,0,0,1,0)^T = 0$。同理，$SV^TV_{*,9} = 0$。

因此$A(V_{*,8}+\lambda V_{*,9}) = USV^T(V_{*,8}+\lambda V_{*,9}) = USV^TV_{*,8}+\lambda USV^TV_{*,9} = U*0 + \lambda U * 0 = 0$。

将$V_{*,8}+\lambda V_{*,9}$ reshape 成3*3，即为基础矩阵$F$。

又因为$F$的rank为2，所以需限制其判别式为0，这可以透过调整$\lambda$来达成。

F的判别式为$\lambda$的三次多项式，可表示为：$a_3 \lambda^3 + a_2 \lambda^2 + a_1 \lambda + a_0 = 0$，求解可得一个或三个$\lambda$。

如果得到三个$\lambda$，需要第八对点来确定最终的$\lambda$，以得到最终的$F$。

